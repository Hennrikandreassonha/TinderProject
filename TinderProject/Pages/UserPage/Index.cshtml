@page
@using TinderProject.Utilities
@model IndexModel
@inject TinderProject.Data.AccessControl accessControl
@inject Microsoft.AspNetCore.Http.IHttpContextAccessor HttpContextAccessor
@{
	ViewData["Title"] = "Profile";
}

<h1>@ViewData["Title"]</h1>

@{
	var completionMessage = ProfileChecker.GetProfileCompletionMessage(Model.LoggedInUser, HttpContextAccessor);
}

@if (!string.IsNullOrWhiteSpace(completionMessage?.ToString()))
{
	<p>@completionMessage</p>
}
else
{
	<h2>Profile details</h2>

	<table>
		<tr>
			<th>First name</th>
			<td>@Model.LoggedInUser.FirstName</td>
		</tr>
		<tr>
			<th>Last name</th>
			<td>@Model.LoggedInUser.LastName</td>
		</tr>
		<tr>
			<th>Date of birth</th>
			<td>@Model.LoggedInUser.DateOfBirth.ToShortDateString()</td>
		</tr>
		<tr>
			<th>Gender</th>
			<td>@Model.LoggedInUser.Gender</td>
		</tr>
		<tr>
			<th>Preference</th>
			<td>@Model.LoggedInUser.Preference</td>
		</tr>
		<tr>
			<th>Profile picture url</th>
			<td>@Model.LoggedInUser.ProfilePictureUrl</td>
		</tr>
		<tr>
			<th>Description</th>
			<td>@Model.LoggedInUser.Description</td>
		</tr>
		<tr>
			<th>Premium user</th>
			<td>@(Model.LoggedInUser.PremiumUser ? "Yes" : "No")</td>
		</tr>
	</table>

	<h3 class="edit-link"><a asp-page="/UserPage/Edit">Edit profile</a></h3>
}